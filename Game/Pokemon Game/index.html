<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PokÃ©mon Game - Menu</title>
  <style>
    :root {
      --bg-color: #f5f5f5;
      --text-color: #333;
      --card-bg: #fff;
      --border-color: #ccc;
      --primary-blue: #3B4CCA;
      --primary-yellow: #ffcc00;
      --silhouette: #333;
    }

    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      transition: background-color 0.3s, color 0.3s;
    }

    /* --- ModalitÃ  Scura --- */
    body.dark-mode {
      --bg-color: #333;
      --text-color: #f0f0f0;
      --card-bg: #444;
      --border-color: #555;
      --silhouette: #000;
    }

    /* --- Contenitori di Pagina --- */
    .page-container {
      display: none; /* Nascosto di default */
      padding: 20px;
      padding-top: 100px; 
      position: relative;
    }

    .back-to-menu {
      position: absolute;
      top: 55px;
      left: 15px;
      padding: 8px 15px;
      font-size: 16px;
      cursor: pointer;
      background-color: var(--primary-blue);
      color: white;
      border: none;
      border-radius: 8px;
      z-index: 10; 
    }

    h1, h2, h3 {
      color: var(--primary-yellow);
    }
    h3 {
      text-align: center;
    }

    /* --- Menu Principale --- */
    #mainMenu {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
      padding-top: 50px;
      box-sizing: border-box; 
    }
    #mainMenu h1 {
      font-size: 3.5rem;
      text-shadow: 2px 2px 4px #333;
    }
    .menu-options button {
      display: block;
      width: 250px;
      margin: 15px auto;
      padding: 20px;
      font-size: 1.5rem;
      cursor: pointer;
      border: none;
      border-radius: 10px;
      background-color: var(--primary-blue);
      color: white;
      transition: background-color 0.3s;
    }
    .menu-options button:hover {
      background-color: #5E6ABC;
    }

    /* --- Gioco (Stili Originali) --- */
    .container {
      display: flex;
      justify-content: center;
      gap: 50px;
      margin-top: 30px;
    }
    .pokemon { text-align: center; }
    .pokemon img {
      width: 100px;
      height: 100px;
      image-rendering: pixelated;
    }
    .options { margin-top: 20px; }
    .options button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    #score, #highscore {
      font-size: 20px;
      margin-top: 15px;
    }
    #gameOverPopup {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    #gameOverPopup .popup-content {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      max-width: 360px;
      color: var(--text-color); 
    }
    #timer { font-size: 22px; color: #d32f2f; }
    #wrongDetails { white-space: pre-wrap; }
    
    /* --- Classifica --- */
    .leaderboard-list-container {
      max-width: 500px;
      margin: 20px auto;
      background: var(--card-bg);
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    #leaderboardList {
      list-style-type: none;
      padding: 0;
      margin: 0;
      font-size: 1.2rem;
    }
    #leaderboardList li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 10px;
      border-bottom: 1px solid var(--border-color);
    }
    #leaderboardList li:last-child {
      border-bottom: none;
    }
    #leaderboardList li .rank {
      font-weight: bold;
      color: var(--primary-blue);
      min-width: 40px;
      text-align: left;
    }
    #leaderboardList li .name {
      flex-grow: 1;
      text-align: left;
      margin-left: 15px;
      word-break: break-all;
    }
    #leaderboardList li .score {
      font-weight: bold;
      color: var(--primary-yellow);
    }
    #leaderboardList .loading-msg {
        justify-content: center;
        text-align: center;
        font-style: italic;
        color: var(--text-color);
    }

    /* --- Account & PokÃ©dex --- */

    /* Stili per Moduli Auth */
    .auth-container {
      max-width: 400px;
      margin: 20px auto;
      background: var(--card-bg);
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: left;
    }
    .auth-container h3 {
      text-align: center;
      margin-top: 0;
    }
    .auth-container p {
        text-align: center;
        font-size: 0.95rem;
        margin: 15px 0;
    }
    .auth-container input {
      width: 95%;
      padding: 10px;
      margin-bottom: 12px;
      font-size: 1rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: var(--bg-color);
      color: var(--text-color);
    }
    .auth-container button {
      width: 100%;
      padding: 12px;
      font-size: 1.1rem;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background-color: var(--primary-blue);
      color: white;
    }
    .auth-toggle {
      margin-top: 15px;
      text-align: center;
      font-size: 0.9rem;
    }
    .auth-toggle button {
      background: none;
      color: var(--primary-blue);
      text-decoration: underline;
      padding: 5px;
      width: auto;
      font-size: 0.9rem;
    }
    /* Stile per pulsante secondario (es. Invia di nuovo) */
    .auth-container button.secondary {
        background-color: var(--primary-yellow);
        color: #333;
        margin-top: 10px;
    }

    .auth-error {
      color: #d32f2f;
      margin-top: 10px;
      text-align: center;
      font-size: 0.9rem;
    }
    /* Messaggio di successo (verde) */
    .auth-success {
      color: #388e3c;
      margin-top: 10px;
      text-align: center;
      font-size: 0.9rem;
    }
    
    /* Stato Auth Globale */
    #authStatus {
      padding: 10px;
      background: var(--card-bg);
      color: var(--text-color);
      font-size: 0.9rem;
      text-align: center;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 998;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    body.dark-mode #authStatus {
      box-shadow: 0 2px 4px rgba(0,0,0,0.4);
    }
    #authStatus button {
      margin-left: 10px;
      background: var(--primary-yellow);
      color: #333;
      border: none;
      padding: 3px 8px;
      border-radius: 5px;
      cursor: pointer;
    }

    /* Contenitori Dati Account */
    #authContainer { display: none; }
    #userDataContainer { display: none; }
    #verificationContainer { display: none; }


    #statsSummary {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 25px;
      font-size: 1.2rem;
      text-align: left;
    }
    #statsSummary div { margin: 10px 0; }
    #statsSummary div:last-child span:first-child { 
        font-weight: bold; 
    }

    #pokedexSearch {
      padding: 10px;
      width: 250px;
      font-size: 16px;
      margin-bottom: 20px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      background-color: var(--card-bg);
      color: var(--text-color);
    }
    .pokedex-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      justify-items: center;
    }
    .pokedex-pokemon {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      width: 110px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .pokedex-pokemon:hover { transform: scale(1.05); }
    .pokedex-pokemon img {
      width: 80px;
      height: 80px;
      image-rendering: pixelated;
    }
    .pokedex-pokemon-name {
      margin-top: 8px;
      font-size: 14px;
      word-wrap: break-word;
    }
    /* Stile per PokÃ©mon Bloccati */
    .pokedex-pokemon.locked img {
      filter: brightness(0);
      opacity: 0.8;
    }
    .pokedex-pokemon.locked .pokedex-pokemon-name {
      color: var(--silhouette);
    }

    /* Modal PokÃ©dex */
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: var(--card-bg);
      color: var(--text-color);
      border-radius: 12px;
      padding: 20px;
      max-width: 400px;
      width: 90%;
      text-align: left;
      position: relative;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 22px;
      font-weight: bold;
      cursor: pointer;
    }
    .modal img {
      display: block;
      margin: 0 auto 10px auto;
      width: 120px;
      height: 120px;
      image-rendering: pixelated;
    }
    .stat { margin: 5px 0; }
    .stat-name { font-size: 14px; margin-bottom: 2px; }
    .stat-bar { height: 10px; background-color: #eee; border-radius: 5px; overflow: hidden; }
    .stat-bar-inner { height: 100%; background-color: #4caf50; width: 0%; }
    /* Modal per PokÃ©mon Bloccati */
    .modal img.locked {
      filter: brightness(0);
    }

    /* --- Impostazioni --- */
    .settings-group {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 20px;
      margin: 20px auto;
      max-width: 400px;
      text-align: left;
    }
    .settings-group label {
      font-size: 1.2rem;
      font-weight: bold;
      display: block;
      margin-bottom: 10px;
    }
    .settings-group select, .settings-group .language-options {
      width: 100%;
      padding: 10px;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      background-color: var(--card-bg);
      color: var(--text-color);
    }
    .language-options button {
      font-size: 24px;
      border: none;
      background: none;
      cursor: pointer;
      padding: 5px 10px;
      border-radius: 5px;
      transition: background-color 0.2s;
    }
    .language-options button:hover {
      background-color: rgba(0,0,0,0.1);
    }
    .language-options button.active {
      background-color: var(--primary-blue);
      color: white;
    }
    
    @media (max-width: 480px) {
      #mainMenu h1 { font-size: 2.5rem; }
      .menu-options button { width: 80%; }
      .container { flex-direction: column; gap: 10px; }
      #gameOverPopup .popup-content { width: 90%; }
    }
  </style>

  </head>
<body>

  <div id="authStatus" data-translate="statusLoading">Caricamento...</div>

  <div id="mainMenu">
    <h1>PokÃ©mon Game</h1>
    <div class="menu-options">
      <button id="playButton" data-translate="play">Game</button>
      <button id="leaderboardButton" data-translate="leaderboard">Classifica</button>
      <button id="accountButton" data-translate="account">Account</button>
      <button id="settingsButton" data-translate="settings">Settings</button>
    </div>
  </div>

  <div id="gameContainer" class="page-container">
    <button class="back-to-menu" data-translate="backToMenu">&larr; Menu</button>
    <h1 id="title"></h1>
    <div id="score"></div>
    <div id="highscore"></div>
    <div id="timer"></div>

    <div class="container">
      <div id="player" class="pokemon">
        <img id="player-sprite" src="" alt="PokÃ©mon" />
        <div id="player-name"></div>
      </div>
      <div id="opponent" class="pokemon">
        <img id="opponent-sprite" src="" alt="PokÃ©mon" />
        <div id="opponent-name"></div>
      </div>
    </div>
    <div id="comparison" style="margin-top: 20px; font-size: 18px;"></div>
    <div class="options">
      <button id="greater"></button>
      <button id="not-greater"></button>
    </div>
  </div>

  <div id="leaderboardContainer" class="page-container">
    <button class="back-to-menu" data-translate="backToMenu">&larr; Menu</button>
    <h2 data-translate="leaderboard">Classifica</h2>
    <div class="leaderboard-list-container">
      <ol id="leaderboardList">
        </ol>
    </div>
  </div>

  <div id="accountContainer" class="page-container">
    <button class="back-to-menu" data-translate="backToMenu">&larr; Menu</button>
    <h2 data-translate="account">Account</h2>

    <div id="authContainer">
      <div class="auth-container" id="loginForm">
        <h3 data-translate="login">Login</h3>
        <input type="email" id="loginEmail" placeholder="Email" autocomplete="email">
        <input type="password" id="loginPassword" placeholder="Password" autocomplete="current-password">
        <button id="loginButton" data-translate="loginButton">Login</button>
        <div id="authErrorLogin" class="auth-error"></div>
        <div class="auth-toggle">
          <span data-translate="authToggleToRegister">Non hai un account?</span>
          <button id="showRegister" data-translate="authToggleToRegisterBtn">Registrati</button>
        </div>
        <div class="auth-toggle">
          <button id="showReset" data-translate="authToggleToResetBtn">Password dimenticata?</button>
        </div>
      </div>

      <div class="auth-container" id="registerForm" style="display: none;">
        <h3 data-translate="register">Registrati</h3>
        <input type="email" id="registerEmail" placeholder="Email" autocomplete="email">
        <input type="password" id="registerPassword" placeholder="Password" autocomplete="new-password">
        <input type="text" id="registerDisplayName" placeholder="Nome visualizzato (unico)" autocomplete="username" maxlength="20">
        <button id="registerButton" data-translate="registerButton">Registrati</button>
        <div id="authErrorRegister" class="auth-error"></div>
        <div class="auth-toggle">
          <span data-translate="authToggleToLogin">Hai giÃ  un account?</span>
          <button id="showLogin" data-translate="authToggleToLoginBtn">Login</button>
        </div>
      </div>

      <div class="auth-container" id="resetForm" style="display: none;">
        <h3 data-translate="resetTitle">Recupera Password</h3>
        <p data-translate="resetMessage">Inserisci la tua email e ti invieremo un link per resettare la password.</p>
        <input type="email" id="resetEmail" placeholder="Email" autocomplete="email">
        <button id="resetButton" data-translate="resetButton">Invia link</button>
        <div id="authErrorReset" class="auth-error"></div> <div class="auth-toggle">
          <span data-translate="authToggleToLogin">Tornare al login?</span>
          <button id="showLoginFromReset" data-translate="authToggleToLoginBtn">Login</button>
        </div>
      </div>
    </div>

    <div id="verificationContainer" class="auth-container" style="display: none;">
      <h3 data-translate="verifyTitle">Verifica la tua Email</h3>
      <p data-translate="verifyMessage">Ti abbiamo inviato un link di verifica. Controlla la tua casella di posta e clicca sul link per attivare il tuo account.</p>
      <button id="resendVerificationButton" class="secondary" data-translate="verifyResend">Invia di nuovo</button>
      <div id="authErrorVerify" class="auth-error"></div> </div>

    <div id="userDataContainer">
      <div id="statsSummary">
        <div><span data-translate="highScore">Record</span>: <span id="accountHighScore">0</span></div>
        <div><span data-translate="gamesPlayed">Partite Giocate</span>: <span id="accountGamesPlayed">0</span></div>
        <div><span data-translate="memberSince">Membro dal</span>: <span id="accountCreatedAt">...</span></div>
      </div>
      
      <h3 data-translate="pokedex">PokÃ©dex</h3>
      <input type="text" id="pokedexSearch" placeholder="Cerca PokÃ©mon...">
      <div id="pokedexGrid" class="pokedex-grid"></div>
    </div>

    <div id="pokemonModal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2 id="modalName"></h2>
        <img id="modalImage" src="" alt="">
        <div id="modalStats"></div>
      </div>
    </div>
  </div>

  <div id="settingsContainer" class="page-container">
    <button class="back-to-menu" data-translate="backToMenu">&larr; Menu</button>
    <h2 data-translate="settings">Settings</h2>

    <div class="settings-group">
      <label for="difficultySetting" data-translate="difficulty">DifficoltÃ </label>
      <select id="difficultySetting">
        <option value="easy" data-translate="easy">Facile</option>
        <option value="medium" data-translate="medium">Medio</option>
        <option value="hard" data-translate="hard">Difficile</option>
      </select>
    </div>

    <div class="settings-group">
      <label for="themeSetting" data-translate="theme">Tema</label>
      <select id="themeSetting">
        <option value="system" data-translate="system">Sistema</option>
        <option value="light" data-translate="light">Chiaro</option>
        <option value="dark" data-translate="dark">Scuro</option>
      </select>
    </div>

    <div class="settings-group">
      <label data-translate="language">Lingua</label>
      <div id="languageSelector" class="language-options">
        </div>
    </div>
  </div>

  <div id="gameOverPopup">
    <div class="popup-content">
      <h2 id="gameOverTitle">Game Over!</h2>
      <p id="finalScore"></p>
      <p id="highScoreMessage"></p>
      <div id="wrongDetails"></div>
      <button id="closePopup">Chiudi</button>
    </div>
  </div>


  <script type="module">
    // ===================================
    // 1. IMPORT FIREBASE (EX-HEAD)
    // ===================================
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics.js";
    import { 
      getAuth, onAuthStateChanged, 
      createUserWithEmailAndPassword, signInWithEmailAndPassword, 
      signOut, sendEmailVerification, sendPasswordResetEmail
    } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
    import { 
      getFirestore, doc, getDoc, setDoc, 
      updateDoc, Timestamp, runTransaction,
      writeBatch, serverTimestamp, collection, 
      query, orderBy, limit, getDocs
    } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAW3-RXK_Sr3ZX9RzL_Tk9kyAU0XBqNz4Q",
      authDomain: "pokemon-8ce86.firebaseapp.com",
      projectId: "pokemon-8ce86",
      storageBucket: "pokemon-8ce86.firebasestorage.app",
      messagingSenderId: "827401493995",
      appId: "1:827401493995:web:52896d9886c0e83b9b0dae",
      measurementId: "G-122Q38G8J6"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    
    // FIX: Crea costanti locali invece di window.fb
    const fb_auth = getAuth(app);
    const fb_db = getFirestore(app);

    // ===================================
    // 2. LOGICA DEL GIOCO (EX-BODY)
    // ===================================

    // --- CHIAVI LOCALSTORAGE ---
    const HIGHSCORE_KEY = "highScore";
    const GAMES_PLAYED_KEY = "gamesPlayed";
    const UNLOCKED_POKEMON_KEY = "unlockedPokemon";
    const LANG_KEY = "lang";
    const THEME_KEY = "theme";
    const DIFFICULTY_KEY = "difficulty";

    // --- VARIABILI GLOBALI ---
    let pokemonList = [];
    let unlockedPokemon = []; 
    let score = 0;
    let gamesPlayed = 0;      
    let highScore = 0;        
    let gameOver = false;
    let timer;
    let timeLeft = 10;
    let t = {}; 
    let lang = "it";
    let difficulty = "easy";
    let currentComparison = null; 

    // Variabili Firebase
    let currentUser = null; 
    let userData = null;    

    // --- OGGETTO TRADUZIONI (INTEGRATO) ---
    const translations = {
      "it": {
        "title": "Gioco PokÃ©mon - Confronto Statistiche", "score": "Punteggio", "record": "Record", "time": "Tempo", "yes": "SÃ¬", "no": "No", "gameOver": "Game Over!", "newRecord": "ğŸ‰ Nuovo record!", "currentRecord": "Record attuale", "close": "Chiudi", "timeout": "Tempo scaduto!", "wrong": "Hai sbagliato!", "play": "Gioca", "account": "Account", "settings": "Impostazioni", "backToMenu": "Menu", "gamesPlayed": "Partite Giocate", "pokedex": "PokÃ©dex", "difficulty": "DifficoltÃ ", "easy": "Facile", "medium": "Medio", "hard": "Difficile", "theme": "Tema", "system": "Sistema", "light": "Chiaro", "dark": "Scuro", "language": "Lingua", "search": "Cerca PokÃ©mon...", "wins": "vince",
        "question": "{pokemon1} ha piÃ¹ {stat} di {pokemon2}?",
        "login": "Login", "register": "Registrati", "emailPlaceholder": "Email", "passwordPlaceholder": "Password", "displayNamePlaceholder": "Nome visualizzato (unico)", "loginButton": "Accedi", "registerButton": "Registrati", "authToggleToRegister": "Non hai un account?", "authToggleToRegisterBtn": "Registrati", "authToggleToLogin": "Hai giÃ  un account?", "authToggleToLoginBtn": "Accedi",
        "errorFieldRequired": "Compila tutti i campi.", "errorNameLength": "Il nome deve essere tra 3 e 20 caratteri.", "errorNameInUse": "Nome utente giÃ  utilizzato.", "errorEmailInUse": "Email giÃ  registrata.", "errorWeakPassword": "La password deve essere di almeno 6 caratteri.", "errorRegisterGeneral": "Errore durante la registrazione.", "errorLoginInvalid": "Email o password errati.", "errorLoginGeneral": "Errore during il login.", "errorLoginRequired": "Inserisci email e password.", "errorEmailInvalid": "Inserisci un'email valida.",
        "statusLoading": "Caricamento...", "statusRegistering": "Verifica e creazione account...", "statusLoggingIn": "Accesso in corso...", "statusLoadingUser": "Caricamento dati di {email}...", "statusLoggedInAs": "Loggato come <strong>{name}</strong>.", "statusGuest": "Stai giocando come <strong>Ospite</strong>.", "statusBtnLogout": "Logout", "statusBtnLogin": "Login/Registrati", "memberSince": "Membro dal", "statusNotVerified": "Email <strong>{email}</strong> non verificata.", "statusNotVerifiedBtn": "Invia di nuovo",
        "leaderboard": "Classifica", "leaderboardLoading": "Caricamento classifica...", "leaderboardEmpty": "Nessun dato ancora.", "leaderboardError": "Errore nel caricamento.",
        "verifyTitle": "Verifica la tua Email", "verifyMessage": "Ti abbiamo inviato un link di verifica. Controlla la tua casella di posta (e spam) e clicca sul link per attivare il tuo account.", "verifyResend": "Invia di nuovo", "verifySent": "Link di verifica inviato!", "verifyError": "Errore durante l'invio. Riprova piÃ¹ tardi.",
        "authToggleToResetBtn": "Password dimenticata?", "resetTitle": "Recupera Password", "resetMessage": "Inserisci la tua email e ti invieremo un link per resettare la password.", "resetButton": "Invia link", "resetSent": "Email inviata! Controlla la tua casella.", "resetError": "Errore. L'email Ã¨ corretta?"
      },
      "en": {
        "title": "PokÃ©mon Game - Stat Comparison", "score": "Score", "record": "High Score", "time": "Time", "yes": "Yes", "no": "No", "gameOver": "Game Over!", "newRecord": "ğŸ‰ New Record!", "currentRecord": "Current record", "close": "Close", "timeout": "Timeâ€™s up!", "wrong": "Wrong!", "play": "Play", "account": "Account", "settings": "Settings", "backToMenu": "Menu", "gamesPlayed": "Games Played", "pokedex": "PokÃ©dex", "difficulty": "Difficulty", "easy": "Easy", "medium": "Medium", "hard": "Hard", "theme": "Theme", "system": "System", "light": "Light", "dark": "Dark", "language": "Language", "search": "Search PokÃ©mon...", "wins": "wins",
        "question": "Does {pokemon1} have more {stat} than {pokemon2}?",
        "login": "Login", "register": "Register", "emailPlaceholder": "Email", "passwordPlaceholder": "Password", "displayNamePlaceholder": "Display name (unique)", "loginButton": "Login", "registerButton": "Register", "authToggleToRegister": "Don't have an account?", "authToggleToRegisterBtn": "Register", "authToggleToLogin": "Already have an account?", "authToggleToLoginBtn": "Login",
        "errorFieldRequired": "Please fill all fields.", "errorNameLength": "Name must be between 3 and 20 characters.", "errorNameInUse": "Username already taken.", "errorEmailInUse": "Email already in use.", "errorWeakPassword": "Password must be at least 6 characters.", "errorRegisterGeneral": "Error during registration.", "errorLoginInvalid": "Incorrect email or password.", "errorLoginGeneral": "Error during login.", "errorLoginRequired": "Please enter email and password.", "errorEmailInvalid": "Please enter a valid email.",
        "statusLoading": "Loading...", "statusRegistering": "Checking name and creating account...", "statusLoggingIn": "Logging in...", "statusLoadingUser": "Loading data for {email}...", "statusLoggedInAs": "Logged in as <strong>{name}</strong>.", "statusGuest": "You are playing as <strong>Guest</strong>.", "statusBtnLogout": "Logout", "statusBtnLogin": "Login/Register", "memberSince": "Member since", "statusNotVerified": "Email <strong>{email}</strong> not verified.", "statusNotVerifiedBtn": "Resend",
        "leaderboard": "Leaderboard", "leaderboardLoading": "Loading leaderboard...", "leaderboardEmpty": "No data yet.", "leaderboardError": "Error loading leaderboard.",
        "verifyTitle": "Verify Your Email", "verifyMessage": "We sent you a verification link. Check your inbox (and spam) and click the link to activate your account.", "verifyResend": "Resend", "verifySent": "Verification link sent!", "verifyError": "Error sending link. Please try again later.",
        "authToggleToResetBtn": "Forgot password?", "resetTitle": "Recover Password", "resetMessage": "Enter your email and we'll send a link to reset your password.", "resetButton": "Send link", "resetSent": "Email sent! Check your inbox.", "resetError": "Error. Is the email correct?"
      },
      "es": {
        "title": "Juego PokÃ©mon - Comparar Stats", "score": "PuntuaciÃ³n", "record": "RÃ©cord", "time": "Tiempo", "yes": "SÃ­", "no": "No", "gameOver": "Â¡Fin del juego!", "newRecord": "ğŸ‰ Â¡Nuevo rÃ©cord!", "currentRecord": "RÃ©cord actual", "close": "Cerrar", "timeout": "Â¡Se acabÃ³ el tiempo!", "wrong": "Â¡Incorrecto!", "play": "Jugar", "account": "Cuenta", "settings": "Ajustes", "backToMenu": "MenÃº", "gamesPlayed": "Partidas Jugadas", "pokedex": "PokÃ©dex", "difficulty": "Dificultad", "easy": "FÃ¡cil", "medium": "Medio", "hard": "DifÃ­cil", "theme": "Tema", "system": "Sistema", "light": "Claro", "dark": "Oscuro", "language": "Idioma", "search": "Buscar PokÃ©mon...", "wins": "gana",
        "question": "Â¿{pokemon1} tiene mÃ¡s {stat} que {pokemon2}?",
        "login": "Iniciar SesiÃ³n", "register": "Registrarse", "emailPlaceholder": "Correo", "passwordPlaceholder": "ContraseÃ±a", "displayNamePlaceholder": "Nombre de usuario (Ãºnico)", "loginButton": "Iniciar SesiÃ³n", "registerButton": "Registrarse", "authToggleToRegister": "Â¿No tienes una cuenta?", "authToggleToRegisterBtn": "Registrarse", "authToggleToLogin": "Â¿Ya tienes una cuenta?", "authToggleToLoginBtn": "Iniciar SesiÃ³n",
        "errorFieldRequired": "Por favor, rellena todos los campos.", "errorNameLength": "El nombre debe tener entre 3 y 20 caracteres.", "errorNameInUse": "Nombre de usuario ya existe.", "errorEmailInUse": "Correo ya en uso.", "errorWeakPassword": "La contraseÃ±a debe tener al menos 6 caracteres.", "errorRegisterGeneral": "Error during el registro.", "errorLoginInvalid": "Correo o contraseÃ±a incorrectos.", "errorLoginGeneral": "Error al iniciar sesiÃ³n.", "errorLoginRequired": "Por favor, introduce correo y contraseÃ±a.", "errorEmailInvalid": "Introduce un correo vÃ¡lido.",
        "statusLoading": "Cargando...", "statusRegistering": "Verificando nombre y creando cuenta...", "statusLoggingIn": "Iniciando sesiÃ³n...", "statusLoadingUser": "Cargando datos de {email}...", "statusLoggedInAs": "SesiÃ³n iniciada como <strong>{name}</strong>.", "statusGuest": "EstÃ¡s jugando como <strong>Invitado</strong>.", "statusBtnLogout": "Cerrar SesiÃ³n", "statusBtnLogin": "Login/Registrar", "memberSince": "Miembro desde", "statusNotVerified": "Email <strong>{email}</strong> no verificado.", "statusNotVerifiedBtn": "Reenviar",
        "leaderboard": "ClasificaciÃ³n", "leaderboardLoading": "Cargando clasificaciÃ³n...", "leaderboardEmpty": "No hay datos.", "leaderboardError": "Error al cargar.",
        "verifyTitle": "Verifica tu Correo", "verifyMessage": "Te enviamos un enlace de verificaciÃ³n. Revisa tu bandeja de entrada (y spam) y haz clic para activar tu cuenta.", "verifyResend": "Reenviar", "verifySent": "Â¡Enlace de verificaciÃ³n enviado!", "verifyError": "Error al enviar. IntÃ©ntalo mÃ¡s tarde.",
        "authToggleToResetBtn": "Â¿ContraseÃ±a olvidada?", "resetTitle": "Recuperar ContraseÃ±a", "resetMessage": "Introduce tu correo y te enviaremos un enlace para resetear tu contraseÃ±a.", "resetButton": "Enviar enlace", "resetSent": "Â¡Correo enviado! Revisa tu bandeja.", "resetError": "Error. Â¿El correo es correcto?"
      },
      "de": {
        "title": "PokÃ©mon-Spiel - Statistikvergleich", "score": "Punkte", "record": "Rekord", "time": "Zeit", "yes": "Ja", "no": "Nein", "gameOver": "Spiel vorbei!", "newRecord": "ğŸ‰ Neuer Rekord!", "currentRecord": "Aktueller Rekord", "close": "SchlieÃŸen", "timeout": "Zeit ist um!", "wrong": "Falsch!", "play": "Spielen", "account": "Konto", "settings": "Einstellungen", "backToMenu": "MenÃ¼", "gamesPlayed": "Gespielte Spiele", "pokedex": "PokÃ©dex", "difficulty": "Schwierigkeit", "easy": "Einfach", "medium": "Mittel", "hard": "Schwer", "theme": "Thema", "system": "System", "light": "Hell", "dark": "Dunkel", "language": "Sprache", "search": "PokÃ©mon suchen...", "wins": "gewinnt",
        "question": "Hat {pokemon1} mehr {stat} als {pokemon2}?",
        "login": "Anmelden", "register": "Registrieren", "emailPlaceholder": "E-Mail", "passwordPlaceholder": "Passwort", "displayNamePlaceholder": "Anzeigename (einzigartig)", "loginButton": "Anmelden", "registerButton": "Registrieren", "authToggleToRegister": "Kein Konto?", "authToggleToRegisterBtn": "Registrieren", "authToggleToLogin": "Bereits ein Konto?", "authToggleToLoginBtn": "Anmelden",
        "errorFieldRequired": "Bitte alle Felder ausfÃ¼llen.", "errorNameLength": "Name muss zwischen 3 und 20 Zeichen lang sein.", "errorNameInUse": "Benutzername bereits vergeben.", "errorEmailInUse": "E-Mail wird bereits verwendet.", "errorWeakPassword": "Passwort muss mindestens 6 Zeichen lang sein.", "errorRegisterGeneral": "Fehler bei der Registrierung.", "errorLoginInvalid": "Falsche E-Mail oder falsches Passwort.", "errorLoginGeneral": "Fehler beim Anmelden.", "errorLoginRequired": "Bitte E-Mail und Passwort eingeben.", "errorEmailInvalid": "Bitte gib eine gÃ¼ltige E-Mail ein.",
        "statusLoading": "Laden...", "statusRegistering": "PrÃ¼fe Namen und erstelle Konto...", "statusLoggingIn": "Anmelden...", "statusLoadingUser": "Lade Daten fÃ¼r {email}...", "statusLoggedInAs": "Angemeldet als <strong>{name}</strong>.", "statusGuest": "Du spielst als <strong>Gast</strong>.", "statusBtnLogout": "Abmelden", "statusBtnLogin": "Anmelden/Registrieren", "memberSince": "Mitglied seit", "statusNotVerified": "E-Mail <strong>{email}</strong> nicht verifiziert.", "statusNotVerifiedBtn": "Erneut senden",
        "leaderboard": "Bestenliste", "leaderboardLoading": "Bestenliste wird geladen...", "leaderboardEmpty": "Noch keine Daten.", "leaderboardError": "Fehler beim Laden.",
        "verifyTitle": "E-Mail bestÃ¤tigen", "verifyMessage": "Wir haben dir einen Link gesendet. PrÃ¼fe dein Postfach (und Spam) und klicke auf den Link, um dein Konto zu aktivieren.", "verifyResend": "Erneut senden", "verifySent": "BestÃ¤tigungslink gesendet!", "verifyError": "Fehler beim Senden. Bitte spÃ¤ter erneut versuchen.",
        "authToggleToResetBtn": "Passwort vergessen?", "resetTitle": "Passwort wiederherstellen", "resetMessage": "Gib deine E-Mail ein und wir senden dir einen Link zum ZurÃ¼cksetzen.", "resetButton": "Link senden", "resetSent": "E-Mail gesendet! PrÃ¼fe dein Postfach.", "resetError": "Fehler. Ist die E-Mail korrekt?"
      },
      "pt": {
        "title": "Jogo PokÃ©mon - ComparaÃ§Ã£o de EstatÃ­sticas", "score": "PontuaÃ§Ã£o", "record": "Recorde", "time": "Tempo", "yes": "Sim", "no": "NÃ£o", "gameOver": "Fim de jogo!", "newRecord": "ğŸ‰ Novo recorde!", "currentRecord": "Recorde atual", "close": "Fechar", "timeout": "Tempo esgotado!", "wrong": "Errado!", "play": "Jogar", "account": "Conta", "settings": "ConfiguraÃ§Ãµes", "backToMenu": "Menu", "gamesPlayed": "Jogos Jogados", "pokedex": "PokÃ©dex", "difficulty": "Dificuldade", "easy": "FÃ¡cil", "medium": "MÃ©dio", "hard": "DifÃ­cil", "theme": "Tema", "system": "Sistema", "light": "Claro", "dark": "Escuro", "language": "Idioma", "search": "Pesquisar PokÃ©mon...", "wins": "vence",
        "question": "{pokemon1} tem mais {stat} do que {pokemon2}?",
        "login": "Login", "register": "Registrar", "emailPlaceholder": "Email", "passwordPlaceholder": "Senha", "displayNamePlaceholder": "Nome de usuÃ¡rio (Ãºnico)", "loginButton": "Login", "registerButton": "Registrar", "authToggleToRegister": "NÃ£o tem uma conta?", "authToggleToRegisterBtn": "Registrar", "authToggleToLogin": "JÃ¡ tem uma conta?", "authToggleToLoginBtn": "Login",
        "errorFieldRequired": "Por favor, preencha todos os campos.", "errorNameLength": "O nome deve ter entre 3 e 20 caracteres.", "errorNameInUse": "Nome de usuÃ¡rio jÃ¡ existe.", "errorEmailInUse": "Email jÃ¡ em uso.", "errorWeakPassword": "A senha deve ter pelo menos 6 caracteres.", "errorRegisterGeneral": "Erro during o registro.", "errorLoginInvalid": "Email ou senha incorretos.", "errorLoginGeneral": "Erro during o login.", "errorLoginRequired": "Por favor, insira email e senha.", "errorEmailInvalid": "Insira um email vÃ¡lido.",
        "statusLoading": "Carregando...", "statusRegistering": "Verificando nome e criando conta...", "statusLoggingIn": "Entrando...", "statusLoadingUser": "Carregando dados de {email}...", "statusLoggedInAs": "Logado como <strong>{name}</strong>.", "statusGuest": "VocÃª estÃ¡ jogando como <strong>Convidado</strong>.", "statusBtnLogout": "Sair", "statusBtnLogin": "Login/Registrar", "memberSince": "Membro desde", "statusNotVerified": "Email <strong>{email}</strong> nÃ£o verificado.", "statusNotVerifiedBtn": "Reenviar",
        "leaderboard": "ClassificaÃ§Ã£o", "leaderboardLoading": "Carregando classificaÃ§Ã£o...", "leaderboardEmpty": "Sem dados ainda.", "leaderboardError": "Erro ao carregar.",
        "verifyTitle": "Verifique seu Email", "verifyMessage": "Enviamos um link de verificaÃ§Ã£o. Verifique sua caixa de entrada (e spam) e clique no link para ativar sua conta.", "verifyResend": "Reenviar", "verifySent": "Link de verificaÃ§Ã£o enviado!", "verifyError": "Erro ao enviar. Tente novamente mais tarde.",
        "authToggleToResetBtn": "Esqueceu a senha?", "resetTitle": "Recuperar Senha", "resetMessage": "Digite seu email e enviaremos um link para redefinir sua senha.", "resetButton": "Enviar link", "resetSent": "Email enviado! Verifique sua caixa de entrada.", "resetError": "Erro. O email estÃ¡ correto?"
      },
      "fr": {
        "title": "Jeu PokÃ©mon - Comparaison de Statistiques", "score": "Score", "record": "Record", "time": "Temps", "yes": "Oui", "no": "Non", "gameOver": "Partie terminÃ©e !", "newRecord": "ğŸ‰ Nouveau record !", "currentRecord": "Record actuel", "close": "Fermer", "timeout": "Temps Ã©coulÃ© !", "wrong": "Faux !", "play": "Jouer", "account": "Compte", "settings": "ParamÃ¨tres", "backToMenu": "Menu", "gamesPlayed": "Parties jouÃ©es", "pokedex": "PokÃ©dex", "difficulty": "DifficultÃ©", "easy": "Facile", "medium": "Moyen", "hard": "Difficile", "theme": "ThÃ¨me", "system": "SystÃ¨me", "light": "Clair", "dark": "Sombre", "language": "Langue", "search": "Chercher PokÃ©mon...", "wins": "gagne",
        "question": "{pokemon1} a-t-il plus de {stat} que {pokemon2} ?",
        "login": "Connexion", "register": "S'inscrire", "emailPlaceholder": "Email", "passwordPlaceholder": "Mot de passe", "displayNamePlaceholder": "Nom d'utilisateur (unique)", "loginButton": "Connexion", "registerButton": "S'inscrire", "authToggleToRegister": "Pas de compte ?", "authToggleToRegisterBtn": "S'inscrire", "authToggleToLogin": "DÃ©jÃ  un compte ?", "authToggleToLoginBtn": "Connexion",
        "errorFieldRequired": "Veuillez remplir tous les champs.", "errorNameLength": "Le nom doit comporter entre 3 et 20 caractÃ¨res.", "errorNameInUse": "Nom d'utilisateur dÃ©jÃ  pris.", "errorEmailInUse": "Email dÃ©jÃ  utilisÃ©.", "errorWeakPassword": "Le mot de passe doit comporter au moins 6 caractÃ¨res.", "errorRegisterGeneral": "Erreur lors de l'inscription.", "errorLoginInvalid": "Email ou mot de passe incorrect.", "errorLoginGeneral": "Erreur lors de la connexion.", "errorLoginRequired": "Veuillez saisir l'email et le mot de passe.", "errorEmailInvalid": "Veuillez saisir un email valide.",
        "statusLoading": "Chargement...", "statusRegistering": "VÃ©rification du nom et crÃ©ation du compte...", "statusLoggingIn": "Connexion...", "statusLoadingUser": "Chargement des donnÃ©es pour {email}...", "statusLoggedInAs": "ConnectÃ© en tant que <strong>{name}</strong>.", "statusGuest": "Vous jouez en tant qu'<strong>InvitÃ©</strong>.", "statusBtnLogout": "DÃ©connexion", "statusBtnLogin": "Connexion/S'inscrire", "memberSince": "Membre depuis", "statusNotVerified": "Email <strong>{email}</strong> non vÃ©rifiÃ©.", "statusNotVerifiedBtn": "Renvoyer",
        "leaderboard": "Classement", "leaderboardLoading": "Chargement du classement...", "leaderboardEmpty": "Pas de donnÃ©es.", "leaderboardError": "Erreur de chargement.",
        "verifyTitle": "VÃ©rifiez votre Email", "verifyMessage": "Nous vous avons envoyÃ© un lien. VÃ©rifiez votre boÃ®te de rÃ©ception (et spam) et cliquez sur le lien pour activer votre compte.", "verifyResend": "Renvoyer", "verifySent": "Lien de vÃ©rification envoyÃ© !", "verifyError": "Erreur lors de l'envoi. RÃ©essayez plus tard.",
        "authToggleToResetBtn": "Mot de passe oubliÃ© ?", "resetTitle": "RÃ©cupÃ©rer Mot de passe", "resetMessage": "Entrez votre email et nous enverrons un lien pour rÃ©initialiser votre mot de passe.", "resetButton": "Envoyer lien", "resetSent": "Email envoyÃ© ! VÃ©rifiez votre boÃ®te.", "resetError": "Erreur. L'email est-il correct ?"
      },
      "ru": {
        "title": "Ğ˜Ğ³Ñ€Ğ° ĞŸĞ¾ĞºĞµĞ¼Ğ¾Ğ½ - Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸Ğº", "score": "Ğ¡Ñ‡Ñ‘Ñ‚", "record": "Ğ ĞµĞºĞ¾Ñ€Ğ´", "time": "Ğ’Ñ€ĞµĞ¼Ñ", "yes": "Ğ”Ğ°", "no": "ĞĞµÑ‚", "gameOver": "Ğ˜Ğ³Ñ€Ğ° Ğ¾ĞºĞ¾Ğ½Ñ‡ĞµĞ½Ğ°!", "newRecord": "ğŸ‰ ĞĞ¾Ğ²Ñ‹Ğ¹ Ñ€ĞµĞºĞ¾Ñ€Ğ´!", "currentRecord": "Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ñ€ĞµĞºĞ¾Ñ€Ğ´", "close": "Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ", "timeout": "Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹ÑˆĞ»Ğ¾!", "wrong": "ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾!", "play": "Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ", "account": "ĞĞºĞºĞ°ÑƒĞ½Ñ‚", "settings": "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸", "backToMenu": "ĞœĞµĞ½Ñ", "gamesPlayed": "Ğ¡Ñ‹Ğ³Ñ€Ğ°Ğ½Ğ¾ Ğ¸Ğ³Ñ€", "pokedex": "ĞŸĞ¾ĞºĞµĞ´ĞµĞºÑ", "difficulty": "Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ", "easy": "Ğ›ĞµĞ³ĞºĞ¾", "medium": "Ğ¡Ñ€ĞµĞ´Ğ½Ğµ", "hard": "Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾", "theme": "Ğ¢ĞµĞ¼Ğ°", "system": "Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ°", "light": "Ğ¡Ğ²ĞµÑ‚Ğ»Ğ°Ñ", "dark": "Ğ¢Ñ‘Ğ¼Ğ½Ğ°Ñ", "language": "Ğ¯Ğ·Ñ‹Ğº", "search": "ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾ĞºĞµĞ¼Ğ¾Ğ½Ğ°...", "wins": "Ğ¿Ğ¾Ğ±ĞµĞ¶Ğ´Ğ°ĞµÑ‚",
        "question": "Ğ£ {pokemon1} Ğ±Ğ¾Ğ»ÑŒÑˆĞµ {stat}, Ñ‡ĞµĞ¼ Ñƒ {pokemon2}?",
        "login": "Ğ’Ñ…Ğ¾Ğ´", "register": "Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ", "emailPlaceholder": "Ğ­Ğ». Ğ¿Ğ¾Ñ‡Ñ‚Ğ°", "passwordPlaceholder": "ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ", "displayNamePlaceholder": "ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ¸Ğ¼Ñ (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ)", "loginButton": "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸", "registerButton": "Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ", "authToggleToRegister": "ĞĞµÑ‚ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°?", "authToggleToRegisterBtn": "Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ", "authToggleToLogin": "Ğ£Ğ¶Ğµ ĞµÑÑ‚ÑŒ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚?", "authToggleToLoginBtn": "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸",
        "errorFieldRequired": "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ²ÑĞµ Ğ¿Ğ¾Ğ»Ñ.", "errorNameLength": "Ğ˜Ğ¼Ñ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ñ‚ 3 Ğ´Ğ¾ 20 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ².", "errorNameInUse": "Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ÑƒĞ¶Ğµ Ğ·Ğ°Ğ½ÑÑ‚Ğ¾.", "errorEmailInUse": "Ğ­Ğ». Ğ¿Ğ¾Ñ‡Ñ‚Ğ° ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ.", "errorWeakPassword": "ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ğ½Ğµ Ğ¼ĞµĞ½ĞµĞµ 6 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ².", "errorRegisterGeneral": "ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸.", "errorLoginInvalid": "ĞĞµĞ²ĞµÑ€Ğ½Ğ°Ñ ÑĞ». Ğ¿Ğ¾Ñ‡Ñ‚Ğ° Ğ¸Ğ»Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ.", "errorLoginGeneral": "ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ²Ñ…Ğ¾Ğ´Ğµ.", "errorLoginRequired": "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ÑĞ». Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ.", "errorEmailInvalid": "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ email.",
        "statusLoading": "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...", "statusRegistering": "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°...", "statusLoggingIn": "Ğ’Ñ…Ğ¾Ğ´ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ...", "statusLoadingUser": "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ {email}...", "statusLoggedInAs": "Ğ’Ñ‹ Ğ²Ğ¾ÑˆĞ»Ğ¸ ĞºĞ°Ğº <strong>{name}</strong>.", "statusGuest": "Ğ’Ñ‹ Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚Ğµ ĞºĞ°Ğº <strong>Ğ“Ğ¾ÑÑ‚ÑŒ</strong>.", "statusBtnLogout": "Ğ’Ñ‹Ğ¹Ñ‚Ğ¸", "statusBtnLogin": "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸/Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ", "memberSince": "Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ñ", "statusNotVerified": "Email <strong>{email}</strong> Ğ½Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½.", "statusNotVerifiedBtn": "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ½Ğ¾Ğ²Ğ°",
        "leaderboard": "Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³", "leaderboardLoading": "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ°...", "leaderboardEmpty": "Ğ”Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚.", "leaderboardError": "ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸.",
        "verifyTitle": "ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğµ Email", "verifyMessage": "ĞœÑ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¸ Ğ²Ğ°Ğ¼ ÑÑÑ‹Ğ»ĞºÑƒ. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ (Ğ¸ ÑĞ¿Ğ°Ğ¼) Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° ÑÑÑ‹Ğ»ĞºÑƒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚.", "verifyResend": "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ½Ğ¾Ğ²Ğ°", "verifySent": "Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ°!", "verifyError": "ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ·Ğ¶Ğµ.",
        "authToggleToResetBtn": "Ğ—Ğ°Ğ±Ñ‹Ğ»Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ?", "resetTitle": "Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ", "resetMessage": "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ email, Ğ¸ Ğ¼Ñ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ¼ ÑÑÑ‹Ğ»ĞºÑƒ Ğ´Ğ»Ñ ÑĞ±Ñ€Ğ¾ÑĞ° Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ.", "resetButton": "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ", "resetSent": "ĞŸĞ¸ÑÑŒĞ¼Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾! ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ¾Ñ‡Ñ‚Ñƒ.", "resetError": "ĞÑˆĞ¸Ğ±ĞºĞ°. Email Ğ²ĞµÑ€Ğ½Ñ‹Ğ¹?"
      },
      "zh": {
        "title": "å®å¯æ¢¦æ¸¸æˆ - å±æ€§å¯¹æ¯”", "score": "åˆ†æ•°", "record": "æœ€é«˜åˆ†", "time": "æ—¶é—´", "yes": "æ˜¯", "no": "å¦", "gameOver": "æ¸¸æˆç»“æŸï¼", "newRecord": "ğŸ‰ æ–°çºªå½•ï¼", "currentRecord": "å½“å‰çºªå½•", "close": "å…³é—­", "timeout": "æ—¶é—´åˆ°ï¼", "wrong": "é”™è¯¯ï¼", "play": "ç©", "account": "å¸æˆ·", "settings": "è®¾ç½®", "backToMenu": "èœå•", "gamesPlayed": "ç©è¿‡çš„æ¸¸æˆ", "pokedex": "å®å¯æ¢¦å›¾é‰´", "difficulty": "éš¾åº¦", "easy": "ç®€å•", "medium": "ä¸­ç­‰", "hard": "å›°éš¾", "theme": "ä¸»é¢˜", "system": "ç³»ç»Ÿ", "light": "æµ…è‰²", "dark": "æ·±è‰²", "language": "è¯­è¨€", "search": "æœç´¢å®å¯æ¢¦...", "wins": "è·èƒœ",
        "question": "{pokemon1}çš„{stat}æ¯”{pokemon2}é«˜å—ï¼Ÿ",
        "login": "ç™»å½•", "register": "æ³¨å†Œ", "emailPlaceholder": "ç”µå­é‚®ä»¶", "passwordPlaceholder": "å¯†ç ", "displayNamePlaceholder": "æ˜¾ç¤ºåç§° (å”¯ä¸€çš„)", "loginButton": "ç™»å½•", "registerButton": "æ³¨å†Œ", "authToggleToRegister": "æ²¡æœ‰å¸æˆ·ï¼Ÿ", "authToggleToRegisterBtn": "æ³¨å†Œ", "authToggleToLogin": "å·²æœ‰å¸æˆ·ï¼Ÿ", "authToggleToLoginBtn": "ç™»å½•",
        "errorFieldRequired": "è¯·å¡«å†™æ‰€æœ‰å­—æ®µã€‚", "errorNameLength": "åç§°å¿…é¡»åœ¨ 3 åˆ° 20 ä¸ªå­—ç¬¦ä¹‹é—´ã€‚", "errorNameInUse": "ç”¨æˆ·åå·²è¢«å ç”¨ã€‚", "errorEmailInUse": "ç”µå­é‚®ä»¶å·²è¢«ä½¿ç”¨ã€‚", "errorWeakPassword": "å¯†ç å¿…é¡»è‡³å°‘ 6 ä¸ªå­—ç¬¦ã€‚", "errorRegisterGeneral": "æ³¨å†Œæ—¶å‡ºé”™ã€‚", "errorLoginInvalid": "ç”µå­é‚®ä»¶æˆ–å¯†ç ä¸æ­£ç¡®ã€‚", "errorLoginGeneral": "ç™»å½•æ—¶å‡ºé”™ã€‚", "errorLoginRequired": "è¯·è¾“å…¥ç”µå­é‚®ä»¶å’Œå¯†ç ã€‚", "errorEmailInvalid": "è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ä»¶ã€‚",
        "statusLoading": "åŠ è½½ä¸­...", "statusRegistering": "æ£€æŸ¥åç§°å¹¶åˆ›å»ºå¸æˆ·...", "statusLoggingIn": "ç™»å½•ä¸­...", "statusLoadingUser": "æ­£åœ¨åŠ è½½ {email} çš„æ•°æ®...", "statusLoggedInAs": "å·²ç™»å½•ä¸º <strong>{name}</strong>ã€‚", "statusGuest": "æ‚¨æ­£åœ¨ä»¥<strong>è®¿å®¢</strong>èº«ä»½ç©æ¸¸æˆã€‚", "statusBtnLogout": "ç™»å‡º", "statusBtnLogin": "ç™»å½•/æ³¨å†Œ", "memberSince": "å§‹äº", "statusNotVerified": "ç”µå­é‚®ä»¶ <strong>{email}</strong> æœªéªŒè¯ã€‚", "statusNotVerifiedBtn": "é‡æ–°å‘é€",
        "leaderboard": "æ’è¡Œæ¦œ", "leaderboardLoading": "æ­£åœ¨åŠ è½½æ’è¡Œæ¦œ...", "leaderboardEmpty": "æš‚æ— æ•°æ®ã€‚", "leaderboardError": "åŠ è½½å‡ºé”™ã€‚",
        "verifyTitle": "éªŒè¯æ‚¨çš„ç”µå­é‚®ä»¶", "verifyMessage": "æˆ‘ä»¬å·²å‘æ‚¨å‘é€äº†éªŒè¯é“¾æ¥ã€‚è¯·æ£€æŸ¥æ‚¨çš„æ”¶ä»¶ç®±ï¼ˆå’Œåƒåœ¾é‚®ä»¶ï¼‰å¹¶å•å‡»é“¾æ¥ä»¥æ¿€æ´»æ‚¨çš„å¸æˆ·ã€‚", "verifyResend": "é‡æ–°å‘é€", "verifySent": "éªŒè¯é“¾æ¥å·²å‘é€ï¼", "verifyError": "å‘é€æ—¶å‡ºé”™ã€‚è¯·ç¨åå†è¯•ã€‚",
        "authToggleToResetBtn": "å¿˜è®°å¯†ç ï¼Ÿ", "resetTitle": "æ¢å¤å¯†ç ", "resetMessage": "è¾“å…¥æ‚¨çš„ç”µå­é‚®ä»¶ï¼Œæˆ‘ä»¬å°†å‘é€é“¾æ¥ä»¥é‡ç½®æ‚¨çš„å¯†ç ã€‚", "resetButton": "å‘é€é“¾æ¥", "resetSent": "é‚®ä»¶å·²å‘é€ï¼è¯·æ£€æŸ¥æ‚¨çš„æ”¶ä»¶ç®±ã€‚", "resetError": "é”™è¯¯ã€‚ç”µå­é‚®ä»¶æ˜¯å¦æ­£ç¡®ï¼Ÿ"
      },
      "ja": {
        "title": "ãƒã‚±ãƒ¢ãƒ³ã‚²ãƒ¼ãƒ  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ¯”è¼ƒ", "score": "ã‚¹ã‚³ã‚¢", "record": "ãƒã‚¤ã‚¹ã‚³ã‚¢", "time": "æ™‚é–“", "yes": "ã¯ã„", "no": "ã„ã„ãˆ", "gameOver": "ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼", "newRecord": "ğŸ‰ æ–°è¨˜éŒ²ï¼", "currentRecord": "ç¾åœ¨ã®è¨˜éŒ²", "close": "é–‰ã˜ã‚‹", "timeout": "æ™‚é–“åˆ‡ã‚Œï¼", "wrong": "é–“é•ã„ï¼", "play": "ãƒ—ãƒ¬ãƒ¼", "account": "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ", "settings": "è¨­å®š", "backToMenu": "ãƒ¡ãƒ‹ãƒ¥ãƒ¼", "gamesPlayed": "ãƒ—ãƒ¬ã‚¤ã—ãŸã‚²ãƒ¼ãƒ ", "pokedex": "ãƒã‚±ãƒ¢ãƒ³å›³é‘‘", "difficulty": "é›£æ˜“åº¦", "easy": "ç°¡å˜", "medium": "æ™®é€š", "hard": "é›£ã—ã„", "theme": "ãƒ†ãƒ¼ãƒ", "system": "ã‚·ã‚¹ãƒ†ãƒ ", "light": "ãƒ©ã‚¤ãƒˆ", "dark": "ãƒ€ãƒ¼ã‚¯", "language": "è¨€èª", "search": "ãƒã‚±ãƒ¢ãƒ³ã‚’æ¤œç´¢...", "wins": "ã®å‹ã¡",
        "question": "{pokemon1}ã¯{pokemon2}ã‚ˆã‚Š{stat}ãŒé«˜ã„ã§ã™ã‹ï¼Ÿ",
        "login": "ãƒ­ã‚°ã‚¤ãƒ³", "register": "ç™»éŒ²", "emailPlaceholder": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹", "passwordPlaceholder": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰", "displayNamePlaceholder": "è¡¨ç¤ºå (ãƒ¦ãƒ‹ãƒ¼ã‚¯)", "loginButton": "ãƒ­ã‚°ã‚¤ãƒ³", "registerButton": "ç™»éŒ²", "authToggleToRegister": "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„ã§ã™ã‹ï¼Ÿ", "authToggleToRegisterBtn": "ç™»éŒ²", "authToggleToLogin": "ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ", "authToggleToLoginBtn": "ãƒ­ã‚°ã‚¤ãƒ³",
        "errorFieldRequired": "ã™ã¹ã¦ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", "errorNameLength": "åå‰ã¯3æ–‡å­—ã‹ã‚‰20æ–‡å­—ã®é–“ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚", "errorNameInUse": "ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯ã™ã§ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚", "errorEmailInUse": "ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚", "errorWeakPassword": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚", "errorRegisterGeneral": "ç™»éŒ²ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚", "errorLoginInvalid": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚", "errorLoginGeneral": "ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚", "errorLoginRequired": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", "errorEmailInvalid": "æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
        "statusLoading": "èª­ã¿è¾¼ã¿ä¸­...", "statusRegistering": "åå‰ã®ç¢ºèªã¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆä¸­...", "statusLoggingIn": "ãƒ­ã‚°ã‚¤ãƒ³ä¸­...", "statusLoadingUser": "{email} ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...", "statusLoggedInAs": "<strong>{name}</strong>ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã€‚", "statusGuest": "<strong>ã‚²ã‚¹ãƒˆ</strong>ã¨ã—ã¦ãƒ—ãƒ¬ã‚¤ä¸­ã€‚", "statusBtnLogout": "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ", "statusBtnLogin": "ãƒ­ã‚°ã‚¤ãƒ³/ç™»éŒ²", "memberSince": "ç™»éŒ²æ—¥", "statusNotVerified": "ãƒ¡ãƒ¼ãƒ« <strong>{email}</strong> ã¯æœªèªè¨¼ã§ã™ã€‚", "statusNotVerifiedBtn": "å†é€ä¿¡",
        "leaderboard": "ãƒ©ãƒ³ã‚­ãƒ³ã‚°", "leaderboardLoading": "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’èª­ã¿è¾¼ã¿ä¸­...", "leaderboardEmpty": "ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚", "leaderboardError": "èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ã€‚",
        "verifyTitle": "ãƒ¡ãƒ¼ãƒ«èªè¨¼", "verifyMessage": "èªè¨¼ãƒªãƒ³ã‚¯ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚å—ä¿¡ãƒˆãƒ¬ã‚¤ï¼ˆã¨è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ï¼‰ã‚’ç¢ºèªã—ã€ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„ã€‚", "verifyResend": "å†é€ä¿¡", "verifySent": "èªè¨¼ãƒªãƒ³ã‚¯ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼", "verifyError": "é€ä¿¡ã‚¨ãƒ©ãƒ¼ã€‚å¾Œã§ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",
        "authToggleToResetBtn": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠå¿˜ã‚Œã§ã™ã‹ï¼Ÿ", "resetTitle": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ", "resetMessage": "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç”¨ã®ãƒªãƒ³ã‚¯ã‚’é€ä¿¡ã—ã¾ã™ã€‚", "resetButton": "ãƒªãƒ³ã‚¯ã‚’é€ä¿¡", "resetSent": "ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼å—ä¿¡ãƒˆãƒ¬ã‚¤ã‚’ã”ç¢ºèªãã ã•ã„ã€‚", "resetError": "ã‚¨ãƒ©ãƒ¼ã€‚ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ­£ã—ã„ã§ã™ã‹ï¼Ÿ"
      },
      "ko": {
        "title": "í¬ì¼“ëª¬ ê²Œì„ - ìŠ¤íƒ¯ ë¹„êµ", "score": "ì ìˆ˜", "record": "ìµœê³  ì ìˆ˜", "time": "ì‹œê°„", "yes": "ì˜ˆ", "no": "ì•„ë‹ˆì˜¤", "gameOver": "ê²Œì„ ì˜¤ë²„!", "newRecord": "ğŸ‰ ì‹ ê¸°ë¡!", "currentRecord": "í˜„ì¬ ê¸°ë¡", "close": "ë‹«ê¸°", "timeout": "ì‹œê°„ ì¢…ë£Œ!", "wrong": "í‹€ë ¸ìŠµë‹ˆë‹¤!", "play": "í”Œë ˆì´", "account": "ê³„ì •", "settings": "ì„¤ì •", "backToMenu": "ë©”ë‰´", "gamesPlayed": "í”Œë ˆì´í•œ ê²Œì„", "pokedex": "í¬ì¼“ëª¬ ë„ê°", "difficulty": "ë‚œì´ë„", "easy": "ì‰¬ì›€", "medium": "ì¤‘ê°„", "hard": "ì–´ë ¤ì›€", "theme": "í…Œë§ˆ", "system": "ì‹œìŠ¤í…œ", "light": "ë¼ì´íŠ¸", "dark": "ë‹¤í¬", "language": "ì–¸ì–´", "search": "í¬ì¼“ëª¬ ê²€ìƒ‰...", "wins": "ìŠ¹ë¦¬",
        "question": "{pokemon1}ì˜ {stat}ì´(ê°€) {pokemon2}ë³´ë‹¤ ë†’ìŠµë‹ˆê¹Œ?",
        "login": "ë¡œê·¸ì¸", "register": "íšŒì›ê°€ì…", "emailPlaceholder": "ì´ë©”ì¼", "passwordPlaceholder": "ë¹„ë°€ë²ˆí˜¸", "displayNamePlaceholder": "í‘œì‹œ ì´ë¦„ (ê³ ìœ )", "loginButton": "ë¡œê·¸ì¸", "registerButton": "íšŒì›ê°€ì…", "authToggleToRegister": "ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?", "authToggleToRegisterBtn": "íšŒì›ê°€ì…", "authToggleToLogin": "ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?", "authToggleToLoginBtn": "ë¡œê·¸ì¸",
        "errorFieldRequired": "ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "errorNameLength": "ì´ë¦„ì€ 3ìì—ì„œ 20ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.", "errorNameInUse": "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì‚¬ìš©ì ì´ë¦„ì…ë‹ˆë‹¤.", "errorEmailInUse": "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.", "errorWeakPassword": "ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.", "errorRegisterGeneral": "íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "errorLoginInvalid": "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.", "errorLoginGeneral": "ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", "errorLoginRequired": "ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”ã€‚", "errorEmailInvalid": "ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.",
        "statusLoading": "ë¡œë”© ì¤‘...", "statusRegistering": "ì´ë¦„ í™•ì¸ ë° ê³„ì • ìƒì„± ì¤‘...", "statusLoggingIn": "ë¡œê·¸ì¸ ì¤‘...", "statusLoadingUser": "{email}ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...", "statusLoggedInAs": "<strong>{name}</strong>(ìœ¼)ë¡œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.", "statusGuest": "<strong>ê²ŒìŠ¤íŠ¸</strong>ë¡œ í”Œë ˆì´ ì¤‘ì…ë‹ˆë‹¤.", "statusBtnLogout": "ë¡œê·¸ì•„ì›ƒ", "statusBtnLogin": "ë¡œê·¸ì¸/íšŒì›ê°€ì…", "memberSince": "ê°€ì…ì¼", "statusNotVerified": "ì´ë©”ì¼ <strong>{email}</strong>ì´(ê°€) í™•ì¸ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.", "statusNotVerifiedBtn": "ì¬ì „ì†¡",
        "leaderboard": "ìˆœìœ„í‘œ", "leaderboardLoading": "ìˆœìœ„í‘œ ë¡œë”© ì¤‘...", "leaderboardEmpty": "ë°ì´í„° ì—†ìŒ.", "leaderboardError": "ë¡œë”© ì˜¤ë¥˜.",
        "verifyTitle": "ì´ë©”ì¼ ì¸ì¦", "verifyMessage": "ì¸ì¦ ë§í¬ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤. ë°›ì€ í¸ì§€í•¨(ë° ìŠ¤íŒ¸)ì„ í™•ì¸í•˜ê³  ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ê³„ì •ì„ í™œì„±í™”í•˜ì„¸ìš”.", "verifyResend": "ì¬ì „ì†¡", "verifySent": "ì¸ì¦ ë§í¬ ì „ì†¡ë¨!", "verifyError": "ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.",
        "authToggleToResetBtn": "ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠìœ¼ì…¨ë‚˜ìš”?", "resetTitle": "ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •", "resetMessage": "ì´ë©”ì¼ì„ ì…ë ¥í•˜ì‹œë©´ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë§í¬ë¥¼ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.", "resetButton": "ë§í¬ ì „ì†¡", "resetSent": "ì´ë©”ì¼ ì „ì†¡ë¨! ë°›ì€ í¸ì§€í•¨ì„ í™•ì¸í•˜ì„¸ìš”.", "resetError": "ì˜¤ë¥˜. ì´ë©”ì¼ì´ ì •í™•í•œê°€ìš”?"
      },
      "fi": {
        "title": "PokÃ©mon-peli - Tilastojen Vertailu", "score": "Pisteet", "record": "EnnÃ¤tys", "time": "Aika", "yes": "KyllÃ¤", "no": "Ei", "gameOver": "Peli ohi!", "newRecord": "ğŸ‰ Uusi ennÃ¤tys!", "currentRecord": "Nykyinen ennÃ¤tys", "close": "Sulje", "timeout": "Aika loppui!", "wrong": "VÃ¤Ã¤rin!", "play": "Pelaa", "account": "Tili", "settings": "Asetukset", "backToMenu": "Valikko", "gamesPlayed": "Pelatut pelit", "pokedex": "PokÃ©dex", "difficulty": "Vaikeustaso", "easy": "Helppo", "medium": "Normaali", "hard": "Vaikea", "theme": "Teema", "system": "JÃ¤rjestelmÃ¤", "light": "Vaalea", "dark": "Tumma", "language": "Kieli", "search": "Etsi PokÃ©mon...", "wins": "voittaa",
        "question": "Onko {pokemon1}n {stat} korkeampi kuin {pokemon2}n?",
        "login": "Kirjaudu sisÃ¤Ã¤n", "register": "RekisterÃ¶idy", "emailPlaceholder": "SÃ¤hkÃ¶posti", "passwordPlaceholder": "Salasana", "displayNamePlaceholder": "NÃ¤yttÃ¶nimi (yksilÃ¶llinen)", "loginButton": "Kirjaudu", "registerButton": "RekisterÃ¶idy", "authToggleToRegister": "EikÃ¶ sinulla ole tiliÃ¤?", "authToggleToRegisterBtn": "RekisterÃ¶idy", "authToggleToLogin": "Onko sinulla jo tili?", "authToggleToLoginBtn": "Kirjaudu",
        "errorFieldRequired": "TÃ¤ytÃ¤ kaikki kentÃ¤t.", "errorNameLength": "Nimen on oltava 3â€“20 merkkiÃ¤ pitkÃ¤.", "errorNameInUse": "KÃ¤yttÃ¤jÃ¤nimi on jo varattu.", "errorEmailInUse": "SÃ¤hkÃ¶posti on jo kÃ¤ytÃ¶ssÃ¤.", "errorWeakPassword": "Salasanan on oltava vÃ¤hintÃ¤Ã¤n 6 merkkiÃ¤ pitkÃ¤.", "errorRegisterGeneral": "Virhe rekisterÃ¶innissÃ¤.", "errorLoginInvalid": "Virheellinen sÃ¤hkÃ¶posti tai salasana.", "errorLoginGeneral": "Virhe kirjautumisessa.", "errorLoginRequired": "Anna sÃ¤hkÃ¶posti ja salasana.", "errorEmailInvalid": "Anna kelvollinen sÃ¤hkÃ¶postiosoite.",
        "statusLoading": "Ladataan...", "statusRegistering": "Tarkistetaan nimeÃ¤ ja luodaan tiliÃ¤...", "statusLoggingIn": "Kirjaudutaan sisÃ¤Ã¤n...", "statusLoadingUser": "Ladataan kÃ¤yttÃ¤jÃ¤n {email} tietoja...", "statusLoggedInAs": "Kirjautuneena nimellÃ¤ <strong>{name}</strong>.", "statusGuest": "Pelaat <strong>Vieraana</strong>.", "statusBtnLogout": "Kirjaudu ulos", "statusBtnLogin": "Kirjaudu/RekisterÃ¶idy", "memberSince": "JÃ¤sen", "statusNotVerified": "SÃ¤hkÃ¶postia <strong>{email}</strong> ei ole vahvistettu.", "statusNotVerifiedBtn": "LÃ¤hetÃ¤ uudelleen",
        "leaderboard": "Tulostaulu", "leaderboardLoading": "Ladataan tulostaulua...", "leaderboardEmpty": "Ei tietoja.", "leaderboardError": "Latausvirhe.",
        "verifyTitle": "Vahvista sÃ¤hkÃ¶postisi", "verifyMessage": "LÃ¤hetimme sinulle vahvistuslinkin. Tarkista sÃ¤hkÃ¶postisi (ja roskaposti) ja aktivoi tilisi napsauttamalla linkkiÃ¤.", "verifyResend": "LÃ¤hetÃ¤ uudelleen", "verifySent": "Vahvistuslinkki lÃ¤hetetty!", "verifyError": "Virhe lÃ¤hetyksessÃ¤. YritÃ¤ myÃ¶hemmin uudelleen.",
        "authToggleToResetBtn": "Salasana unohtunut?", "resetTitle": "Palauta salasana", "resetMessage": "Anna sÃ¤hkÃ¶postisi, niin lÃ¤hetÃ¤mme linkin salasanan palauttamista varten.", "resetButton": "LÃ¤hetÃ¤ linkki", "resetSent": "SÃ¤hkÃ¶posti lÃ¤hetetty! Tarkista postilaatikkosi.", "resetError": "Virhe. Onko sÃ¤hkÃ¶posti oikein?"
      },
      // Nomi delle Statistiche per tutte le lingue
      "statNames": {
        "it": { "hp": "HP", "attack": "Attacco", "defense": "Difesa", "spattack": "Attacco Speciale", "spdefense": "Difesa Speciale", "speed": "VelocitÃ " },
        "en": { "hp": "HP", "attack": "Attack", "defense": "Defense", "spattack": "Sp. Attack", "spdefense": "Sp. Defense", "speed": "Speed" },
        "es": { "hp": "HP", "attack": "Ataque", "defense": "Defensa", "spattack": "Atq. Esp.", "spdefense": "Def. Esp.", "speed": "Velocidad" },
        "de": { "hp": "KP", "attack": "Angriff", "defense": "Verteidigung", "spattack": "Spezial-Angriff", "spdefense": "Spezial-Verteidigung", "speed": "Initiative" },
        "pt": { "hp": "HP", "attack": "Ataque", "defense": "Defesa", "spattack": "Ataque Esp.", "spdefense": "Defesa Esp.", "speed": "Velocidade" },
        "fr": { "hp": "PV", "attack": "Attaque", "defense": "DÃ©fense", "spattack": "Attaque SpÃ©.", "spdefense": "DÃ©fense SpÃ©.", "speed": "Vitesse" },
        "ru": { "hp": "ĞĞ—", "attack": "ĞÑ‚Ğ°ĞºĞ°", "defense": "Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ°", "spattack": "Ğ¡Ğ¿ĞµÑ†. ĞÑ‚Ğ°ĞºĞ°", "spdefense": "Ğ¡Ğ¿ĞµÑ†. Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ°", "speed": "Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ" },
        "zh": { "hp": "HP", "attack": "æ”»å‡»", "defense": "é˜²å¾¡", "spattack": "ç‰¹æ”»", "spdefense": "ç‰¹é˜²", "speed": "é€Ÿåº¦" },
        "ja": { "hp": "HP", "attack": "ã“ã†ã’ã", "defense": "ã¼ã†ãã‚‡", "spattack": "ã¨ãã“ã†", "spdefense": "ã¨ãã¼ã†", "speed": "ã™ã°ã‚„ã•" },
        "ko": { "hp": "HP", "attack": "ê³µê²©", "defense": "ë°©ì–´", "spattack": "íŠ¹ìˆ˜ê³µê²©", "spdefense": "íŠ¹ìˆ˜ë°©ì–´", "speed": "ìŠ¤í”¼ë“œ" },
        "fi": { "hp": "HP", "attack": "HyÃ¶kkÃ¤ys", "defense": "Puolustus", "spattack": "ErikoishyÃ¶kkÃ¤ys", "spdefense": "Erikoispuolustus", "speed": "Nopeus" }
      }
    };
    const flagEmojis = {
      "it": "ğŸ‡®ğŸ‡¹", "en": "ğŸ‡¬ğŸ‡§", "es": "ğŸ‡ªğŸ‡¸", "de": "ğŸ‡©ğŸ‡ª", "pt": "ğŸ‡µğŸ‡¹", "fr": "ğŸ‡«ğŸ‡·", "ru": "ğŸ‡·ğŸ‡º", "zh": "ğŸ‡¨ğŸ‡³", "ja": "ğŸ‡¯ğŸ‡µ", "ko": "ğŸ‡°ğŸ‡·", "fi": "ğŸ‡«ğŸ‡®"
    };

    // --- FUNZIONI DI NAVIGAZIONE ---
    function showPage(pageId) {
      document.getElementById("mainMenu").style.display = "none";
      document.querySelectorAll(".page-container").forEach(page => {
        page.style.display = "none";
      });
      const page = document.getElementById(pageId);
      if (page) {
        page.style.display = "block";
      }
    }

    // --- FUNZIONI DI IMPOSTAZIONE E CARICAMENTO ---
    document.addEventListener("DOMContentLoaded", () => {
      loadDeviceSettings();
      applyLanguage(lang); // Questo imposta "Caricamento..."
      applyTheme(localStorage.getItem(THEME_KEY) || 'system');
      loadGameData();
      setupNavigationListeners();
      setupSettingsListeners();
      setupAuthListeners();
      showPage("mainMenu");
      setupAuthObserver(); // Questo ORA funziona e lo sovrascrive
    });
    
    function loadDeviceSettings() {
      lang = localStorage.getItem(LANG_KEY) || navigator.language.slice(0, 2) || "en";
      if (!translations[lang]) lang = "en";
      difficulty = localStorage.getItem(DIFFICULTY_KEY) || "easy";
    }

    function loadGuestData() {
      highScore = parseInt(localStorage.getItem(HIGHSCORE_KEY) || 0);
      gamesPlayed = parseInt(localStorage.getItem(GAMES_PLAYED_KEY) || 0);
      unlockedPokemon = JSON.parse(localStorage.getItem(UNLOCKED_POKEMON_KEY) || "[]");
    }

    async function loadUserData(uid) {
      try {
        // FIX: Usa fb_db e le funzioni importate
        const userRef = doc(fb_db, "users", uid);
        const userSnap = await getDoc(userRef);

        if (userSnap.exists()) {
          userData = userSnap.data();
          highScore = userData.highScore;
          gamesPlayed = userData.gamesPlayed;
          unlockedPokemon = userData.unlockedPokemon;
        } else {
          console.warn("Dati utente non trovati, sto creando un profilo...");
          await createUserData(uid, currentUser.email, "Giocatore"); // Fallback
          loadGuestData(); 
        }
      } catch (error)
      {
        console.error("Errore nel caricare i dati utente:", error);
        loadGuestData();
      }
    }

    async function createUserData(uid, email, displayName) {
      // FIX: Usa fb_db e le funzioni importate
      const newUserRef = doc(fb_db, "users", uid);
      const newDisplayNameRef = doc(fb_db, "displayNames", displayName.toLowerCase());

      const newUserData = {
        uid: uid,
        email: email,
        displayName: displayName,
        createdAt: serverTimestamp(), // FIX: Usa la funzione importata
        highScore: 0,
        gamesPlayed: 0,
        unlockedPokemon: []
      };
      
      try {
        const batch = writeBatch(fb_db); // FIX: Usa la funzione importata
        batch.set(newUserRef, newUserData);
        batch.set(newDisplayNameRef, { uid: uid });
        
        await batch.commit();
        await loadUserData(uid); 

      } catch (error) {
        console.error("Errore creazione dati utente:", error);
      }
    }


    async function loadGameData() {
      try {
        const response = await fetch("pokemonList.json");
        if (!response.ok) throw new Error("Errore nel caricare pokemonList.json");
        pokemonList = await response.json();
        
        if (document.getElementById("accountContainer").style.display === "block") {
          displayPokedex(pokemonList);
        }

      } catch (error) {
        console.error("Errore:", error);
        alert("Non Ã¨ stato possibile caricare la lista dei PokÃ©mon.");
      }
    }

    function setupNavigationListeners() {
      document.getElementById("playButton").addEventListener("click", () => {
        score = 0; 
        document.getElementById("score").innerText = `${t.score}: ${score}`;
        
        showPage("gameContainer");
        startRound();
      });
      document.getElementById("leaderboardButton").addEventListener("click", () => {
        loadLeaderboardPage();
        showPage("leaderboardContainer");
      });
      document.getElementById("accountButton").addEventListener("click", () => {
        loadAccountPage(); // Questa ora gestisce la logica di visualizzazione
        showPage("accountContainer");
      });
      document.getElementById("settingsButton").addEventListener("click", () => {
        loadSettingsPage();
        showPage("settingsContainer");
      });

      document.querySelectorAll(".back-to-menu").forEach(button => {
        button.addEventListener("click", () => {
          clearInterval(timer); 
          showPage("mainMenu");
        });
      });

      document.getElementById("closePopup").onclick = () => {
        document.getElementById("gameOverPopup").style.display = "none";
        // MODIFICA: Riavvia il gioco invece di tornare al menu
        score = 0; 
        document.getElementById("score").innerText = `${t.score}: ${score}`;
        startRound();
      };
    }

    // --- FUNZIONI DI AUTENTICAZIONE ---

    // Funzione helper per mostrare/nascondere i moduli auth
    function showAuthForm(formToShow) { // 'loginForm', 'registerForm', 'resetForm'
        document.getElementById("loginForm").style.display = 'none';
        document.getElementById("registerForm").style.display = 'none';
        document.getElementById("resetForm").style.display = 'none';
        
        if (formToShow) {
            document.getElementById(formToShow).style.display = 'block';
        }
        
        // Pulisce tutti gli errori
        document.getElementById("authErrorLogin").innerText = "";
        document.getElementById("authErrorRegister").innerText = "";
        document.getElementById("authErrorReset").innerText = "";
        document.getElementById("authErrorReset").classList.remove("auth-success");
    }

    function setupAuthObserver() {
      const authStatus = document.getElementById("authStatus");

      onAuthStateChanged(fb_auth, async (user) => {
        currentUser = user; // Aggiorna lo stato globale
        
        if (user) {
          if (user.emailVerified) {
            // Utente loggato E verificato
            authStatus.innerHTML = (t.statusLoadingUser || "Loading data for {email}...").replace("{email}", user.email);
            await loadUserData(user.uid); 
            
            const name = userData?.displayName || user.email;
            const statusText = (t.statusLoggedInAs || "Logged in as <strong>{name}</strong>.").replace("{name}", name);
            authStatus.innerHTML = `${statusText} <button id="logoutButton">${t.statusBtnLogout || "Logout"}</button>`;
            document.getElementById("logoutButton").addEventListener("click", handleLogout);
          } else {
            // Utente loggato MA NON verificato
            const statusText = (t.statusNotVerified || "Email <strong>{email}</strong> not verified.").replace("{email}", user.email);
            authStatus.innerHTML = `${statusText} <button id="resendVerificationStatusButton">${t.statusNotVerifiedBtn || "Resend"}</button> <button id="logoutButton">${t.statusBtnLogout || "Logout"}</button>`;
            document.getElementById("logoutButton").addEventListener("click", handleLogout);
            document.getElementById("resendVerificationStatusButton").addEventListener("click", handleResendVerification);
          }
        } else {
          // Utente non loggato (Ospite)
          currentUser = null;
          userData = null;
          loadGuestData(); 
          authStatus.innerHTML = `${t.statusGuest || "You are playing as <strong>Guest</strong>."} <button id="loginShowButton">${t.statusBtnLogin || "Login/Register"}</button>`;
          document.getElementById("loginShowButton").addEventListener("click", () => {
            loadAccountPage();
            showPage("accountContainer");
          });
        }
        
        // Aggiorna la pagina account SE Ã¨ quella attiva
        if (document.getElementById("accountContainer").style.display === "block") {
          loadAccountPage();
        }
        // Aggiorna il record nel gioco SE Ã¨ quello attivo
        if (document.getElementById("gameContainer").style.display === "block") {
          document.getElementById("highscore").innerText = `${t.record}: ${highScore}`;
        }
      });
    }

    function setupAuthListeners() {
      // Toggle tra i form
      document.getElementById("showRegister").addEventListener("click", () => showAuthForm("registerForm"));
      document.getElementById("showLogin").addEventListener("click", () => showAuthForm("loginForm"));
      document.getElementById("showReset").addEventListener("click", () => showAuthForm("resetForm"));
      document.getElementById("showLoginFromReset").addEventListener("click", () => showAuthForm("loginForm"));

      // Pulsanti di azione
      document.getElementById("loginButton").addEventListener("click", handleLogin);
      document.getElementById("registerButton").addEventListener("click", handleRegister);
      document.getElementById("resetButton").addEventListener("click", handlePasswordReset);
      document.getElementById("resendVerificationButton").addEventListener("click", handleResendVerification);
    }

    async function handleLogin() {
      const email = document.getElementById("loginEmail").value;
      const password = document.getElementById("loginPassword").value;
      const errorEl = document.getElementById("authErrorLogin");
      
      if (!email || !password) {
        errorEl.innerText = t.errorLoginRequired;
        return;
      }
      
      try {
        errorEl.innerText = t.statusLoggingIn;
        await signInWithEmailAndPassword(fb_auth, email, password);
        // onAuthStateChanged gestirÃ  il successo
        errorEl.innerText = "";
      } catch (error) {
        console.error("Errore Login:", error.code);
        if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {
          errorEl.innerText = t.errorLoginInvalid;
        } else {
          errorEl.innerText = t.errorLoginGeneral;
        }
      }
    }

    async function handleRegister() {
      const email = document.getElementById("registerEmail").value;
      const password = document.getElementById("registerPassword").value;
      const displayName = document.getElementById("registerDisplayName").value.trim();
      const errorEl = document.getElementById("authErrorRegister");

      if (!email || !password || !displayName) {
        errorEl.innerText = t.errorFieldRequired;
        return;
      }
      if (displayName.length < 3 || displayName.length > 20) {
        errorEl.innerText = t.errorNameLength;
        return;
      }
      
      try {
        errorEl.innerText = t.statusRegistering;
        
        // Controlla se il nome Ã¨ giÃ  stato preso
        const nameRef = doc(fb_db, "displayNames", displayName.toLowerCase());
        const nameSnap = await getDoc(nameRef);
        
        if (nameSnap.exists()) {
          throw new Error(t.errorNameInUse);
        }

        // Crea l'utente
        const userCredential = await createUserWithEmailAndPassword(fb_auth, email, password);
        const user = userCredential.user;

        // Crea i dati utente nel database
        await createUserData(user.uid, user.email, displayName);
        
        // INVIA EMAIL DI VERIFICA
        await sendEmailVerification(user);

        // onAuthStateChanged gestirÃ  la visualizzazione della schermata di verifica
        
      } catch (error) {
        console.error("Errore Registrazione:", error);
        if (error.message === t.errorNameInUse) {
          errorEl.innerText = error.message;
        } else if (error.code === 'auth/email-already-in-use') {
          errorEl.innerText = t.errorEmailInUse;
        } else if (error.code === 'auth/weak-password') {
          errorEl.innerText = t.errorWeakPassword;
        } else {
          errorEl.innerText = t.errorRegisterGeneral;
        }
      }
    }

    async function handlePasswordReset() {
        const email = document.getElementById("resetEmail").value;
        const errorEl = document.getElementById("authErrorReset");
        
        if (!email) {
            errorEl.innerText = t.errorEmailInvalid;
            errorEl.classList.remove("auth-success");
            return;
        }
        
        try {
            await sendPasswordResetEmail(fb_auth, email);
            errorEl.innerText = t.resetSent;
            errorEl.classList.add("auth-success"); // Rendi il testo verde
        } catch (error) {
            console.error("Errore reset password:", error);
            errorEl.innerText = t.resetError;
            errorEl.classList.remove("auth-success");
        }
    }
    
    async function handleResendVerification() {
        if (!currentUser) return;
        const errorEl = document.getElementById("authErrorVerify");
        
        try {
            await sendEmailVerification(currentUser);
            errorEl.innerText = t.verifySent;
            errorEl.classList.add("auth-success");
        } catch (error) {
            console.error("Errore invio verifica:", error);
            errorEl.innerText = t.verifyError;
            errorEl.classList.remove("auth-success");
        }
    }

    function handleLogout() {
      signOut(fb_auth).catch(error => console.error("Errore Logout:", error));
    }

    // --- FUNZIONI DI IMPOSTAZIONE (LINGUA, TEMA, DIFFICOLTÃ€) ---

    function applyLanguage(newLang) {
      lang = newLang;
      localStorage.setItem(LANG_KEY, lang);
      t = translations[lang] || translations.en;
      
      document.querySelectorAll("[data-translate]").forEach(el => {
        const key = el.dataset.translate;
        if (t[key]) el.innerText = t[key];
      });

      document.title = t.title || "PokÃ©mon Game";
      // Menu
      document.getElementById("playButton").innerText = t.play || "Play";
      document.getElementById("leaderboardButton").innerText = t.leaderboard || "Leaderboard";
      document.getElementById("accountButton").innerText = t.account || "Account";
      document.getElementById("settingsButton").innerText = t.settings || "Settings";
      // Gioco
      document.getElementById("title").innerText = t.title || "PokÃ©mon Game";
      document.getElementById("greater").innerText = t.yes || "Yes";
      document.getElementById("not-greater").innerText = t.no || "No";
      document.getElementById("gameOverTitle").innerText = t.gameOver || "Game Over!";
      document.getElementById("closePopup").innerText = t.close || "Close";
      // Punteggi
      document.getElementById("highscore").innerText = `${t.record || "Record"}: ${highScore}`;
      document.getElementById("score").innerText = `${t.score || "Score"}: ${score}`;
      // Search
      document.getElementById("pokedexSearch").placeholder = t.search || "Search PokÃ©mon...";

      // Aggiorna placeholder per Auth
      try {
        document.getElementById("loginEmail").placeholder = t.emailPlaceholder || "Email";
        document.getElementById("loginPassword").placeholder = t.passwordPlaceholder || "Password";
        document.getElementById("registerEmail").placeholder = t.emailPlaceholder || "Email";
        document.getElementById("registerPassword").placeholder = t.passwordPlaceholder || "Password";
        document.getElementById("registerDisplayName").placeholder = t.displayNamePlaceholder || "Display name (unique)";
        document.getElementById("resetEmail").placeholder = t.emailPlaceholder || "Email";
      } catch (e) {
        // Ignora
      }
      
      loadSettingsPage();
    }
    
    function applyTheme(theme) {
      document.body.classList.remove('dark-mode', 'light-mode');
      if (theme === 'dark') {
        document.body.classList.add('dark-mode');
      } else if (theme === 'light') {
        document.body.classList.add('light-mode');
      } else { 
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          document.body.classList.add('dark-mode');
        }
      }
    }
    
    function setupSettingsListeners() {
      const difficultySelect = document.getElementById("difficultySetting");
      const themeSelect = document.getElementById("themeSetting");
      const langSelector = document.getElementById("languageSelector");

      difficultySelect.addEventListener("change", (e) => {
        difficulty = e.target.value;
        localStorage.setItem(DIFFICULTY_KEY, difficulty);
      });

      themeSelect.addEventListener("change", (e) => {
        const newTheme = e.target.value;
        localStorage.setItem(THEME_KEY, newTheme);
        applyTheme(newTheme);
      });
      
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
        const savedTheme = localStorage.getItem(THEME_KEY) || 'system';
        if (savedTheme === 'system') {
          applyTheme('system');
        }
      });

      langSelector.addEventListener("click", (e) => {
        const newLang = e.target.dataset.lang || e.target.parentElement.dataset.lang;
        if (newLang) {
          applyLanguage(newLang);
        }
      });
    }

    function loadSettingsPage() {
      document.getElementById("difficultySetting").value = difficulty;
      document.getElementById("themeSetting").value = localStorage.getItem(THEME_KEY) || 'system';
      const langSelector = document.getElementById("languageSelector");
      langSelector.innerHTML = "";
      Object.keys(flagEmojis).forEach(key => {
        const button = document.createElement("button");
        button.dataset.lang = key;
        button.title = key.toUpperCase();
        button.innerHTML = flagEmojis[key];
        if (key === lang) button.classList.add("active");
        langSelector.appendChild(button);
      });
    }

    // --- FUNZIONI DI GIOCO ---

    function getSpriteUrl(name) {
      const normalized = name
        .toLowerCase()
        .replace(/-/g, "")
        .replace(/â€ /g, "")
        .replace(/â™‚/g, "m")
        .replace(/â™€/g, "f")
        .replace(/[^a-z0-9 ]/g, "")
        .replace(/ /g, "-");
      return `https://play.pokemonshowdown.com/sprites/gen5/${normalized}.png`;
    }

    function getRandomPokemon() {
      return pokemonList[Math.floor(Math.random() * pokemonList.length)];
    }
    
    function getComparison(player, opponent) {
      const stats = ["hp", "attack", "defense", "spattack", "spdefense", "speed"];
      const stat = stats[Math.floor(Math.random() * stats.length)];
      return {
        stat,
        playerStat: player.stats[stat],
        opponentStat: opponent.stats[stat],
        isGreater: player.stats[stat] > opponent.stats[stat],
        player: player,
        opponent: opponent
      };
    }

    function startTimer() {
      clearInterval(timer);
      if (difficulty === "hard") timeLeft = 5;
      else if (difficulty === "medium") timeLeft = 7;
      else timeLeft = 10;
      document.getElementById("timer").innerText = `${t.time}: ${timeLeft}s`;
      timer = setInterval(() => {
        if (gameOver) {
          clearInterval(timer);
          return;
        }
        timeLeft--;
        document.getElementById("timer").innerText = `${t.time}: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          triggerGameOver(t.timeout, currentComparison);
        }
      }, 1000);
    }
    
    function handleAnswer(isGreater) {
      if (gameOver) return;
      const comparison = currentComparison;
      const isCorrect = (isGreater && comparison.isGreater) || (!isGreater && !comparison.isGreater);
      
      if (isCorrect) {
        score++;
        document.getElementById("score").innerText = `${t.score}: ${score}`;
        unlockPokemon(comparison.player.id);
        startRound();
      } else {
        triggerGameOver(t.wrong, comparison);
      }
    }

    function unlockPokemon(pokemonId) {
      if (!unlockedPokemon.includes(pokemonId)) {
        unlockedPokemon.push(pokemonId);

        // Salva solo se l'utente Ã¨ loggato E VERIFICATO
        if (currentUser && currentUser.emailVerified) {
          const userRef = doc(fb_db, "users", currentUser.uid);
          updateDoc(userRef, { unlockedPokemon: unlockedPokemon })
            .catch(err => console.error("Errore salvataggio pokÃ©mon sbloccati:", err));
        } else if (!currentUser) {
          // Salva in local storage solo se Ã¨ un ospite
          localStorage.setItem(UNLOCKED_POKEMON_KEY, JSON.stringify(unlockedPokemon));
        }
      }
    }
    
    async function triggerGameOver(reason, comparison) {
      clearInterval(timer);
      gameOver = true;
      let newRecord = false;

      gamesPlayed++;

      if (score > highScore) {
        highScore = score;
        newRecord = true;
      }

      // Salva solo se l'utente Ã¨ loggato E VERIFICATO
      if (currentUser && currentUser.emailVerified && userData) {
        userData.gamesPlayed = gamesPlayed;
        userData.highScore = highScore;
        
        try {
          const userRef = doc(fb_db, "users", currentUser.uid);
          await updateDoc(userRef, {
            gamesPlayed: gamesPlayed,
            highScore: highScore
          });
        } catch (err) {
          console.error("Errore aggiornamento dati fine partita:", err);
        }
      } else if (!currentUser) {
        // Salva in local storage solo se Ã¨ un ospite
        localStorage.setItem(GAMES_PLAYED_KEY, gamesPlayed.toString());
        if (newRecord) {
          localStorage.setItem(HIGHSCORE_KEY, highScore.toString());
        }
      }

      document.getElementById("finalScore").innerText = `${t.score}: ${score}`;
      document.getElementById("highScoreMessage").innerText = newRecord ? t.newRecord : `${t.currentRecord}: ${highScore}`;

      const wrongEl = document.getElementById("wrongDetails");
      if (comparison) {
        const statLabel = (translations.statNames[lang] && translations.statNames[lang][comparison.stat]) || translations.statNames.en[comparison.stat] || comparison.stat;
        const playerVal = comparison.playerStat;
        const oppVal = comparison.opponentStat;
        const diff = Math.abs(playerVal - oppVal);
        const winner = playerVal === oppVal ? "Tie" : (playerVal > oppVal ? comparison.player.name : comparison.opponent.name);
        
        const detailsLines = [
          reason,
          `${comparison.player.name}: ${playerVal} ${statLabel}`,
          `${comparison.opponent.name}: ${oppVal} ${statLabel}`,
          `${winner === "Tie" ? "" : `Î” ${diff} â€” ${winner} ${t.wins || 'wins'}`}`
        ].filter(Boolean);

        wrongEl.innerText = detailsLines.join("\n");
      } else {
        wrongEl.innerText = reason;
      }

      document.getElementById("gameOverPopup").style.display = "flex";
    }

    function startRound() {
      if (pokemonList.length === 0) return;
      gameOver = false;
      
      document.getElementById("highscore").innerText = `${t.record}: ${highScore}`; 

      const player = getRandomPokemon();
      let opponent = getRandomPokemon();
      if (pokemonList.length > 1) {
        while (opponent.id === player.id) {
          opponent = getRandomPokemon();
        }
      }

      currentComparison = getComparison(player, opponent);

      document.getElementById("player-sprite").src = getSpriteUrl(player.name);
      document.getElementById("opponent-sprite").src = getSpriteUrl(opponent.name);
      document.getElementById("player-name").innerText = player.name;
      document.getElementById("opponent-name").innerText = opponent.name;

      const statLabel = (translations.statNames[lang] && translations.statNames[lang][currentComparison.stat]) || translations.statNames.en[currentComparison.stat] || currentComparison.stat;
      
      const questionFormat = t.question || "Does {pokemon1} have more {stat} than {pokemon2}?";
      const question = questionFormat
        .replace("{pokemon1}", player.name)
        .replace("{stat}", statLabel)
        .replace("{pokemon2}", opponent.name);
        
      document.getElementById("comparison").innerText = question;

      document.getElementById("greater").onclick = () => handleAnswer(true);
      document.getElementById("not-greater").onclick = () => handleAnswer(false);
      startTimer();
    }
    
    // --- FUNZIONI ACCOUNT & POKÃ‰DEX & CLASSIFICA ---
    
    const pokedexGrid = document.getElementById('pokedexGrid');
    const searchInput = document.getElementById('pokedexSearch');
    const modal = document.getElementById('pokemonModal');
    const modalName = document.getElementById('modalName');
    const modalImage = document.getElementById('modalImage');
    const modalStats = document.getElementById('modalStats');
    const closeBtn = document.querySelector('#pokemonModal .close-btn');

    async function loadLeaderboardPage() {
      const listEl = document.getElementById("leaderboardList");
      listEl.innerHTML = `<li class="loading-msg" data-translate="leaderboardLoading">${t.leaderboardLoading || "Caricamento classifica..."}</li>`;

      try {
        const usersRef = collection(fb_db, "users");
        const q = query(usersRef, orderBy("highScore", "desc"), limit(10));
        
        const querySnapshot = await getDocs(q);
        
        listEl.innerHTML = ""; // Clear loading
        
        if (querySnapshot.empty) {
          listEl.innerHTML = `<li class="loading-msg" data-translate="leaderboardEmpty">${t.leaderboardEmpty || "Nessun dato ancora."}</li>`;
          return;
        }
        
        let rank = 1;
        querySnapshot.forEach((doc) => {
          const user = doc.data();
          // Mostra solo utenti con un punteggio > 0
          if (user.highScore > 0) { 
            const li = document.createElement("li");
            li.innerHTML = `
              <span class="rank">#${rank}</span>
              <span class="name">${user.displayName}</span>
              <span class="score">${user.highScore}</span>
            `;
            listEl.appendChild(li);
            rank++;
          }
        });

        if (rank === 1) { // Se i top 10 hanno tutti 0
            listEl.innerHTML = `<li class="loading-msg" data-translate="leaderboardEmpty">${t.leaderboardEmpty || "Nessun dato ancora."}</li>`;
        }

      } catch (error) {
        console.error("Errore caricamento classifica:", error);
        listEl.innerHTML = `<li class="loading-msg" data-translate="leaderboardError">${t.leaderboardError || "Errore nel caricamento."}</li>`;
      }
    }

    function loadAccountPage() {
      // Questa funzione determina COSA mostrare nella pagina Account
      // in base allo stato di 'currentUser'
      
      const authCont = document.getElementById("authContainer");
      const dataCont = document.getElementById("userDataContainer");
      const verifyCont = document.getElementById("verificationContainer");
      
      if (currentUser) {
        if (currentUser.emailVerified) {
          // UTENTE LOGGATO E VERIFICATO
          authCont.style.display = "none";
          verifyCont.style.display = "none";
          dataCont.style.display = "block";

          // Popola i dati (assicurati che 'userData' sia caricato)
          if (userData) {
            document.getElementById("accountHighScore").innerText = userData.highScore;
            document.getElementById("accountGamesPlayed").innerText = userData.gamesPlayed;
            
            let creationDate = "...";
            if (userData.createdAt && userData.createdAt.toDate) {
                creationDate = userData.createdAt.toDate().toLocaleDateString(lang);
            } else if (userData.createdAt) {
                creationDate = new Date(userData.createdAt.seconds * 1000).toLocaleDateString(lang);
            }
            document.getElementById("accountCreatedAt").innerText = creationDate;
            
            displayPokedex(pokemonList);
          }
        } else {
          // UTENTE LOGGATO MA NON VERIFICATO
          authCont.style.display = "none";
          dataCont.style.display = "none";
          verifyCont.style.display = "block";
          // Pulisci i messaggi di errore/successo precedenti
          document.getElementById("authErrorVerify").innerText = "";
          document.getElementById("authErrorVerify").classList.remove("auth-success");
        }
      } else {
        // UTENTE NON LOGGATO (OSPITE)
        dataCont.style.display = "none";
        verifyCont.style.display = "none";
        authCont.style.display = "block";
        
        // Mostra il modulo di login di default
        showAuthForm("loginForm");
      }
    }
    
    function displayPokedex(list) {
      pokedexGrid.innerHTML = '';
      if (!list) return;

      list.forEach(pokemon => {
        const isUnlocked = unlockedPokemon.includes(pokemon.id);
        
        const div = document.createElement('div');
        div.className = 'pokedex-pokemon';
        
        const img = document.createElement('img');
        img.src = getSpriteUrl(pokemon.name);
        img.alt = pokemon.name;

        const name = document.createElement('div');
        name.className = 'pokedex-pokemon-name';

        if (isUnlocked) {
          name.textContent = pokemon.name;
          div.addEventListener('click', () => showPokemonModal(pokemon, true));
        } else {
          div.classList.add('locked');
          name.textContent = "???";
          div.addEventListener('click', () => showPokemonModal(pokemon, false));
        }

        div.appendChild(img);
        div.appendChild(name);
        pokedexGrid.appendChild(div);
      });
    }

    function showPokemonModal(pokemon, isUnlocked) {
      const statLabels = (translations.statNames[lang] || translations.statNames.en);

      if (isUnlocked) {
        modalName.textContent = `#${pokemon.id} ${pokemon.name}`;
        modalImage.src = getSpriteUrl(pokemon.name);
        modalImage.classList.remove('locked');
        modalStats.innerHTML = '';

        for (let stat in pokemon.stats) {
          const statDiv = document.createElement('div');
          statDiv.className = 'stat';
          const statLabel = statLabels[stat] || stat.toUpperCase();
          statDiv.innerHTML = `
            <div class="stat-name">${statLabel}: ${pokemon.stats[stat]}</div>
            <div class="stat-bar">
              <div class="stat-bar-inner" style="width: ${(pokemon.stats[stat] / 255) * 100}%"></div>
            </div>
          `;
          modalStats.appendChild(statDiv);
        }
      } else {
        modalName.textContent = `???`;
        modalImage.src = getSpriteUrl(pokemon.name);
        modalImage.classList.add('locked');
        modalStats.innerHTML = '';
        ['hp', 'attack', 'defense', 'spattack', 'spdefense', 'speed'].forEach(stat => {
          const statDiv = document.createElement('div');
          statDiv.className = 'stat';
          const statLabel = statLabels[stat] || stat.toUpperCase();
          statDiv.innerHTML = `
            <div class="stat-name">${statLabel}: ???</div>
            <div class="stat-bar">
              <div class="stat-bar-inner" style="width: 0%"></div>
            </div>
          `;
          modalStats.appendChild(statDiv);
        });
      }
      modal.style.display = 'flex';
    }

    // Listener Modal PokÃ©dex
    closeBtn.addEventListener('click', () => modal.style.display = 'none');
    window.addEventListener('click', (e) => {
      if (e.target === modal) modal.style.display = 'none';
    });

    // Listener Ricerca PokÃ©dex
    searchInput.addEventListener('input', () => {
      const term = searchInput.value.toLowerCase();
      const filtered = pokemonList.filter(p => p.name.toLowerCase().includes(term));
      displayPokedex(filtered);
    });

  </script>
</body>
</html>